document.addEventListener("DOMContentLoaded",()=>{const u=document,p=window,E=u.documentElement,m=u.body,c=(d,o=u)=>o.querySelector(d),T=(d,o=u)=>Array.from(o.querySelectorAll(d)),S={get:(d,o=null)=>{try{return localStorage.getItem(d)??o}catch{return o}},set:(d,o)=>{try{localStorage.setItem(d,o)}catch{}}};(function(){const o=()=>{if(c("#gooeyDefs"))return;const n=u.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("width","0"),n.setAttribute("height","0"),n.style.position="absolute",n.innerHTML=`
        <defs id="gooeyDefs">
          <filter id="gooey">
            <feGaussianBlur in="SourceGraphic" stdDeviation="6" result="blur"/>
            <feColorMatrix in="blur" mode="matrix"
              values="1 0 0 0 0
                      0 1 0 0 0
                      0 0 1 0 0
                      0 0 0 18 -7" result="goo"/>
            <feBlend in="SourceGraphic" in2="goo"/>
          </filter>
        </defs>`,u.body.appendChild(n)},e=()=>{let n=c("#appLoader");return n||(n=u.createElement("div"),n.id="appLoader",n.setAttribute("aria-live","polite"),n.setAttribute("aria-busy","true"),n.className="entering",n.innerHTML=`
          <div class="loader-card glass">
            <div class="liquid" aria-hidden="true">
              <div class="dot"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div>
            </div>
            <div class="loader-title">Loadingâ€¦</div>
          </div>
        `,u.body.appendChild(n)),n},t=()=>{if(m.classList.contains("scroll-lock"))return;const n=p.scrollY||u.documentElement.scrollTop||0;E.classList.add("scroll-lock"),m.classList.add("scroll-lock"),m.style.setProperty("--lock-top",`-${n}px`)},s=()=>{if(!m.classList.contains("scroll-lock"))return;const n=getComputedStyle(m).getPropertyValue("--lock-top"),v=parseInt(n||"0")||0;E.classList.remove("scroll-lock"),m.classList.remove("scroll-lock"),m.style.removeProperty("--lock-top"),p.scrollTo(0,-v)};o();const a=e();let r=0,l=!1,b=null;const y=()=>{clearTimeout(b),a.hidden=!1,a.classList.remove("leaving"),a.classList.add("entering"),t(),requestAnimationFrame(()=>a.classList.remove("entering"))},k=(n=120)=>{clearTimeout(b),b=setTimeout(()=>{a.classList.add("leaving"),setTimeout(()=>{a.hidden=!0,a.classList.remove("leaving"),s()},260)},n)},P=n=>!n||typeof n.then!="function"?n:(r++,y(),n.finally(()=>{r=Math.max(0,r-1),r===0&&k()})),M=(n=!0)=>{if(!n||l||!("fetch"in p))return;const v=p.fetch.bind(p);p.fetch=function(...D){return r++,y(),v(...D).finally(()=>{r=Math.max(0,r-1),r===0&&k()})},l=!0};p.AppLoader={show:y,hide:k,trackPromise:P,trackFetch:M,markReady(){r=0,k(60)}},y(),p.addEventListener("load",()=>p.AppLoader.markReady(),{once:!0}),p.jQuery&&p.jQuery.fn&&p.jQuery.fn.dataTable&&p.jQuery(u).on("init.dt",function(){p.AppLoader.markReady()}),new MutationObserver(()=>{m.dataset.appReady==="1"&&p.AppLoader.markReady()}).observe(m,{attributes:!0,attributeFilter:["data-app-ready"]})})(),(function(){const o=`
      .topbar{z-index:70!important}
      .dropdown-wrap{position:relative; z-index:95!important}
      .overlay{z-index:55!important}
      .dm-fab{z-index:9999!important}
    `,e=u.createElement("style");e.textContent=o,u.head.appendChild(e)})();const h=c("#overlay"),L=c("#sidebar"),g=c("#hamburgerBtn"),F=c("#topbar"),x=c("#dmFab"),C=c("#notifBtn"),R=c("#notifDropdown"),X=c("#userBtn"),$=c("#userDropdown"),q=c("#changePwBtn"),w=c("#changePasswordModal"),B=c("#logoutForm"),f=c("#poweroff"),A=c("#powerKnob");(function(){if(!x)return;const o="theme",e=s=>{E.setAttribute("data-theme",s),E.classList.toggle("dark",s==="dark"),S.set(o,s),x.textContent=s==="dark"?"ðŸŒ™":"ðŸŒž",x.setAttribute("aria-pressed",String(s==="dark")),x.title=s==="dark"?"Switch to light":"Switch to dark"},t=()=>{const s=S.get(o);if(s==="dark"||s==="light")return s;const a=E.getAttribute("data-theme");return a==="dark"||a==="light"?a:"light"};e(t()),x.addEventListener("click",()=>e(t()==="dark"?"light":"dark"))})(),(function(){const o=(e,t)=>{if(!e||!t)return;const s=()=>{t.hidden=!1,e.setAttribute("aria-expanded","true")},a=()=>{t.hidden=!0,e.setAttribute("aria-expanded","false")};let r=!1;e.addEventListener("click",l=>{if(l.stopPropagation(),!t.hidden){a();return}s(),r=!0,setTimeout(()=>{r=!1},0)}),t.addEventListener("click",l=>l.stopPropagation()),u.addEventListener("click",()=>{t.hidden||r||a()}),u.addEventListener("keydown",l=>{l.key==="Escape"&&!t.hidden&&a()}),T('[data-close="#'+t.id+'"]').forEach(l=>l.addEventListener("click",a))};o(C,R),o(X,$)})(),(function(){if(!w)return;const o=()=>{w.hidden=!1,w.setAttribute("aria-hidden","false")},e=()=>{w.hidden=!0,w.setAttribute("aria-hidden","true")};q&&q.addEventListener("click",t=>{t.stopPropagation(),o()}),w.addEventListener("click",t=>{t.target.matches("[data-modal-close], .modal-backdrop, .icon-btn")&&e()}),u.addEventListener("keydown",t=>{t.key==="Escape"&&!w.hidden&&e()}),window.openPwModal=o,window.closePwModal=e})(),(function(){if(!g||!L)return;const o=p.matchMedia("(max-width:1024px)"),e=()=>o.matches;try{const r=S.get("sidebar-collapsed","0")==="1";!e()&&r&&m.classList.add("sidebar-collapsed")}catch{}const t=()=>{L.classList.add("open"),h&&(h.hidden=!1),g.classList.add("is-open")},s=()=>{L.classList.remove("open"),h&&(h.hidden=!0),g.classList.remove("is-open")},a=()=>{e()?(g.classList.toggle("is-open",L.classList.contains("open")),g.classList.remove("is-collapsed"),g.setAttribute("aria-expanded",String(L.classList.contains("open")))):(g.classList.toggle("is-collapsed",m.classList.contains("sidebar-collapsed")),g.classList.remove("is-open"),g.setAttribute("aria-expanded",String(!m.classList.contains("sidebar-collapsed"))),L.classList.remove("open"),h&&(h.hidden=!0))};g.addEventListener("click",r=>{r.stopPropagation(),e()?L.classList.contains("open")?s():t():(m.classList.toggle("sidebar-collapsed"),S.set("sidebar-collapsed",m.classList.contains("sidebar-collapsed")?"1":"0")),a()}),h&&h.addEventListener("click",s),o.addEventListener?.("change",()=>{s(),a()}),a()})(),(function(){if(!F)return;let o=-1;const e=()=>{const t=p.scrollY||u.documentElement.scrollTop||0;t>0!=o>0&&(F.classList.toggle("is-scrolled",t>0),o=t)};e(),u.addEventListener("scroll",e,{passive:!0})})(),(function(){if(!(f&&A&&B))return;const o=Math.min(Math.max(parseFloat(f.dataset.threshold??"0.6"),.15),.95);let e=!1,t=0,s=0;const a=6,r=()=>{const i=f.getBoundingClientRect(),n=A.getBoundingClientRect().width||i.height-a*2;return{maxX:Math.max(0,i.width-n-a*2)}},l=i=>{s=Math.max(0,Math.min(1,i));const{maxX:n}=r(),v=s*n;A.style.transform=`translateX(${v}px)`;const D=f.querySelector(".power-text");D&&(D.style.opacity=(1-s*.85).toFixed(3)),f.classList.toggle("completed",s>=o)},b=()=>{f.classList.remove("dragging","completed"),A.style.transition="transform .25s ease",l(0),setTimeout(()=>{A.style.transition=""},260)},y=()=>{f.classList.add("completed"),B.submit()},k=i=>{e=!0,t=i,f.classList.add("dragging")},P=i=>{if(!e)return;const{maxX:n}=r(),v=Math.max(0,Math.min(n,i-t));l(n?v/n:0)},M=()=>{e&&(e=!1,f.classList.remove("dragging"),s>=o?y():b())};f.addEventListener("pointerdown",i=>{i.button===0&&(f.setPointerCapture?.(i.pointerId),k(i.clientX))}),window.addEventListener("pointermove",i=>P(i.clientX)),window.addEventListener("pointerup",M),window.addEventListener("pointercancel",M),f.addEventListener("keydown",i=>{i.key==="ArrowRight"&&(l(s+.1),i.preventDefault()),i.key==="ArrowLeft"&&(l(s-.1),i.preventDefault()),(i.key==="Enter"||i.key===" ")&&(s>=o?y():l(1),i.preventDefault())}),b(),f.setAttribute("aria-valuenow","0"),f.addEventListener("transitionend",()=>f.setAttribute("aria-valuenow",String(Math.round(s*100))))})(),(function(){const o=(t,s)=>{const a=document.querySelector(`[data-accordion="${t}"]`),r=document.querySelector(`[data-accordion-panel="${t}"]`);!a||!r||(a.classList.toggle("open",s),r.classList.toggle("open",s))},e=new Set;T(".nav-children").forEach(t=>{if(t.querySelector(".nav-child.active")){const s=t.getAttribute("data-accordion-panel");s&&e.add(s)}}),T("[data-accordion]").forEach(t=>{const s=t.getAttribute("data-accordion"),a=document.querySelector(`[data-accordion-panel="${s}"]`),r=t.classList.contains("open")||a?.classList.contains("open")||e.has(s);o(s,!!r),t.addEventListener("click",l=>{l.preventDefault(),o(s,!t.classList.contains("open"))})}),e.forEach(t=>o(t,!0))})(),(function(){h&&(h.hidden=!0);const o=c("#notifDropdown"),e=c("#userDropdown");[o,e].forEach(t=>{t&&(t.hidden=!0)})})(),(function(){const o=()=>{const e=document.querySelector('meta[name="swal"]');if(e?.content)try{return JSON.parse(e.content)}catch{}return null};if(typeof window.showAlert=="function"){const e=o();if(e&&typeof e=="object"){window.showAlert(e);try{const t=document.querySelector('meta[name="swal"]');t&&t.remove()}catch{}}}})()});
